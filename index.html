<html>
    <head>
        <link rel="stylesheet" href="./css/style.css"/>
        <title>Домовой воробей</title>
    </head>
    <body id="body" class="body">
        <div class="cards">
            <div class="flycard">
                <h1 class="flycard__caption">Домо́вый воробе́й (Passer domesticus)</h1>
                <div class="flycard__description">
                    Домо́вый воробе́й (Passer domesticus (Linnaeus, 1758); устаревшее биноминальное название — Fringilla domestica Linnaeus, 1758) — наиболее распространённый вид из рода настоящих воробьёв (лат. Passer), семейства воробьиных (Passeridae). Это одна из самых известных птиц, обитающих по соседству с жилищем человека (отсюда её видовое название «домовый») и хорошо узнаваемых как по внешнему виду, так и по характерному чириканью. (с) <a href="https://ru.wikipedia.org/wiki/%D0%94%D0%BE%D0%BC%D0%BE%D0%B2%D1%8B%D0%B9_%D0%B2%D0%BE%D1%80%D0%BE%D0%B1%D0%B5%D0%B9">Википедия</a>
                </div>
                <table class="features">
                    <caption class="features__caption">Характеристика</caption>
                    <thead>
                        <th class="features__property cell">Длина тела, см.</th>
                        <th class="features__property cell">Масса, г.</th>
                        <th class="features__property cell">Окраска оперенья</th>
                    </thead>
                    <tbody>
                        <tr class="features__container">
                            <td class="features__property cell">до 16 см</td>
                            <td class="features__property cell">23 - 35</td>
                            <td class="features__fullinfo cell">сверху коричневато-бурая, ржавчинного цвета с чёрными пятнами, снизу беловатая или серая. Щёки белые, ушная область бледно-серая. Крылья с желтовато-белой поперечной полосой.</td>
                        </tr>
                    </tbody>
                </table>
                <div class="flycard__captain">
                    <strong>P.S.:</strong> В кино наиболее ярким представителем данного вида является Капитан Джек Воробей (англ. Captain Jack Sparrow)
                </div>
            </div>
        </div>

        <script type="text/javascript">
            var idCurrentBackground = -1;
            var htmlBody = document.querySelector('#body');
            var urlCreator = window.URL || window.webkitURL;

            var getImage = function(uri, imageOnLoad) {
                var imageReq = new XMLHttpRequest();
                imageReq.open("GET", uri, true);
                imageReq.responseType = "blob"; //arraybuffer
                imageReq.onload = function(event) {
                    imageOnLoad(new Blob([imageReq.response], {type: "image/png"}), event);
                };

                imageReq.send();
            };

            var getImageChain = function(uris, effectTimeout) {
                if (uris.length == 0) return;

                getImage(uris[0], function(blob) {
                    htmlBody.style.backgroundImage = 'url(' + urlCreator.createObjectURL(blob) + ')';
                    window.setTimeout(function() {
                        getImageChain(uris.slice(1), effectTimeout);
                    }, effectTimeout);
                });
            }

            var query = function() {
                var images = [
                    "./img/new-main_robin__last_1-min.png",
                    "./img/new-main_robin__last_2-min.png",
                    "./img/new-main_robin__last_3-min.png",
                    "./img/new-main_robin__last_4-min.png",
                    "./img/new-main_robin__last_5-min.png"
                ]

                getImageChain(images, 1500);
            };

            window.addEventListener("load", query, false);
        </script>
    </body>
</html>